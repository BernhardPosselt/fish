/*! homepage 2014-04-12 */
!function(a,b,c){var d=c.module("ListenToTheFish",["ngAnimate","ngRoute"]);d.config(["$interpolateProvider","$routeProvider","$provide",function(a,b,c){a.startSymbol("[["),a.endSymbol("]]");var d="/",e=d+"api/1.0/",f=d+"static/homepage/partials/";b.when("/events",{controller:"EventController",templateUrl:f+"events.html",activeTab:"events",resolve:{events:["$http","$q",function(a,b){var c=b.defer();return a.get(e+"events/?format=json").success(function(a){c.resolve(a)}).error(function(){c.reject()}),c.promise}],eventTypes:["$http","$q",function(a,b){var c=b.defer();return a.get(e+"events/types?format=json").success(function(a){c.resolve(a)}).error(function(){c.reject()}),c.promise}]}}).when("/events/:id",{controller:"EventController",templateUrl:f+"events.html",activeTab:"events",resolve:{events:["$http","$q",function(a,b){var c=b.defer();return a.get(e+"events/?format=json").success(function(a){c.resolve(a)}).error(function(){c.reject()}),c.promise}],eventTypes:["$http","$q",function(a,b){var c=b.defer();return a.get(e+"events/types?format=json").success(function(a){c.resolve(a)}).error(function(){c.reject()}),c.promise}]}}).when("/about",{templateUrl:f+"about.html",activeTab:"about"}).otherwise({redirectTo:"/events"}),c.constant("baseUrl",d)}]),d.run(["$rootScope","$route",function(a,b){a.$route=b,a.isRouteLoading=!1,a.$on("$routeChangeStart",function(){a.isRouteLoading=!0}),a.$on("$routeChangeError",function(){a.isRouteLoading=!1}),a.$on("$routeChangeSuccess",function(){a.isRouteLoading=!1})}]);d.controller("EventController",["$scope","$routeParams","$sce","events","eventTypes",function(a,b,d,e,f){a.events=e,a.eventTypes={},c.forEach(f,function(b){a.eventTypes[b.id]=b});var g=parseInt(b.id,10)||0;c.forEach(e,function(b){g===b.id&&(b.description=d.trustAsHtml(b.description),a.activeEvent=b)}),a.getType=function(b){return a.eventTypes[b.id]}}])}(window,jQuery,angular);